{"version":3,"sources":["images/icon-close.svg","images/wknd-logo-dk.svg","images/icon-loading.svg","api/useGraphQL.js","components/Error.js","components/Loading.js","components/Adventures.js","components/AdventureDetail.js","App.js","index.js"],"names":["module","exports","AEMHeadless","require","process","REACT_APP_PUBLIC_URI","REACT_APP_GRAPHQL_ENDPOINT","REACT_APP_AUTHORIZATION","REACT_APP_DEV_TOKEN","useGraphQL","query","path","useState","data","setData","errors","setErrors","useEffect","config","serviceURL","endpoint","includes","auth","split","sdk","runQuery","bind","runPersistedQuery","then","map","error","message","join","mapErrors","catch","Error","className","this","props","errorMessage","Component","Loading","src","loadingIcon","alt","AdventureItem","_path","adventureTitle","adventurePrimaryImage","to","adventureTripLength","adventurePrice","adventureListQuery","filterQuery","activity","Adventures","setQuery","onClick","adventureList","items","adventure","index","key","Contributer","pictureReference","fullName","occupation","withRouter","contentFragmentPath","location","pathname","substring","match","url","length","adventureData","adventureByPath","item","backIcon","adventureActivity","adventureType","adventureGroupSize","adventureDifficulty","dangerouslySetInnerHTML","__html","adventureDescription","html","adventureItinerary","adventureContributor","Home","App","logo","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5289a437.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon-close.f227c489.svg\";","module.exports = __webpack_public_path__ + \"static/media/wknd-logo-dk.36593320.svg\";","module.exports = __webpack_public_path__ + \"static/media/icon-loading.c507a81b.svg\";","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport { useState, useEffect } from 'react';\nconst { AEMHeadless } = require('@adobe/aem-headless-client-js')\n\nconst {\n  REACT_APP_PUBLIC_URI,\n  REACT_APP_GRAPHQL_ENDPOINT,\n  REACT_APP_AUTHORIZATION,\n  REACT_APP_DEV_TOKEN\n} = process.env;\n\n/**\n * Custom React Hook to perform a GraphQL query\n * @param query - GraphQL query\n * @param path - Persistent query path\n */\nexport default function useGraphQL(query, path) {\n  let [data, setData] = useState(null);\n  let [errors, setErrors] = useState(null);\n\n  useEffect(() => {\n    const config = {\n      serviceURL: REACT_APP_PUBLIC_URI,\n      endpoint: REACT_APP_GRAPHQL_ENDPOINT,\n    };\n    if (REACT_APP_AUTHORIZATION) {\n      if (REACT_APP_AUTHORIZATION.includes(\":\")) config.auth = REACT_APP_AUTHORIZATION.split(\":\");\n      else config.auth = REACT_APP_AUTHORIZATION;\n    }\n    if (REACT_APP_DEV_TOKEN) config.auth = REACT_APP_DEV_TOKEN;\n\n    const sdk = new AEMHeadless(config);\n    const request = query ? sdk.runQuery.bind(sdk) : sdk.runPersistedQuery.bind(sdk);\n\n    request(query || path)\n      .then(({ data, errors }) => {\n        if (errors) setErrors(mapErrors(errors));\n        if (data) setData(data);\n      })\n      .catch((error) => {\n        setErrors(error);\n      });\n  }, [query, path]);\n\n  return { data, errors }\n}\n\n/**\n * concatenate error messages into a single string.\n * @param {*} errors\n */\nexport function mapErrors(errors) {\n  return errors.map((error) => error.message ? error.message : error).join(\",\");\n}","/*\r\nCopyright 2020 Adobe\r\nAll Rights Reserved.\r\n\r\nNOTICE: Adobe permits you to use, modify, and distribute this file in\r\naccordance with the terms of the Adobe license agreement accompanying\r\nit.\r\n*/\r\nimport React, {Component} from 'react';\r\n\r\nclass Error extends Component {\r\n\r\n    render() {\r\n        return (<div className=\"error\">\r\n              <span className=\"error-message\">{`Error: ${this.props.errorMessage}`}</span>\r\n          </div>);\r\n    }\r\n}\r\n\r\nexport default Error;","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React, {Component} from 'react';\nimport loadingIcon from '../images/icon-loading.svg';\n\nclass Loading extends Component {\n\n    render() {\n        return (<div className=\"loading\">\n              <img src={loadingIcon} alt=\"Loading...\" />\n          </div>);\n    }\n}\n\nexport default Loading;","/*\r\nCopyright 2020 Adobe\r\nAll Rights Reserved.\r\n\r\nNOTICE: Adobe permits you to use, modify, and distribute this file in\r\naccordance with the terms of the Adobe license agreement accompanying\r\nit.\r\n*/\r\nimport React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport useGraphQL from '../api/useGraphQL';\r\nimport Error from './Error';\r\nimport Loading from './Loading';\r\nimport './Adventures.scss';\r\n\r\n\r\nfunction Adventures() {\r\n  //Use React Hooks to set the initial GraphQL query to a variable named `query`\r\n  // If query is not defined, persistent query will be requested\r\n  // Initially use cached / persistent query.\r\n  const [query, setQuery] = useState('');\r\n  const persistentQuery = 'wknd/adventures-all';\r\n  //Use a custom React Hook to execute the GraphQL query\r\n  const { data, errorMessage } = useGraphQL(adventureListQuery);\r\n\r\n  //If there is an error with the GraphQL query\r\n  if (errorMessage) return <Error errorMessage={errorMessage} />;\r\n\r\n  //If data is null then return a loading state...\r\n  if (!data) return <Loading />;\r\n\r\n  return (\r\n    <div className=\"adventures\">\r\n      <button onClick={() => setQuery('')}>All</button>\r\n      <button onClick={() => setQuery(filterQuery('Camping'))}>Camping</button>\r\n      <button onClick={() => setQuery(filterQuery('Surfing'))}>Surfing</button>\r\n      <ul className=\"adventure-items\">\r\n        {\r\n          //Iterate over the returned data items from the query\r\n          data.adventureList.items.map((adventure, index) => {\r\n            return (\r\n              <AdventureItem key={index} {...adventure} />\r\n            );\r\n          })\r\n        }\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Render individual Adventure item\r\nfunction AdventureItem(props) {\r\n\r\n  //Must have title, path, and image\r\n  if (!props || !props._path || !props.adventureTitle || !props.adventurePrimaryImage) {\r\n    return null;\r\n  }\r\n  return (\r\n    <li className=\"adventure-item\">\r\n      <Link to={`/adventure:${props._path}`}>\r\n        <img className=\"adventure-item-image\" src={props.adventurePrimaryImage._path}\r\n          alt={props.adventureTitle} />\r\n      </Link>\r\n      <div className=\"adventure-item-length-price\">\r\n        <div className=\"adventure-item-length\">{props.adventureTripLength}</div>\r\n        <div className=\"adventure-item-price\">{props.adventurePrice}</div>\r\n      </div>\r\n      <div className=\"adventure-item-title\">{props.adventureTitle}</div>\r\n    </li>\r\n  );\r\n}\r\n\r\nconst adventureListQuery = `{\r\n  adventureList {\r\n    items {\r\n      _path\r\n      adventureActivity\r\n      adventureTitle\r\n      adventurePrimaryImage {\r\n        ...on ImageRef {\r\n          _path\r\n          mimeType\r\n          width\r\n          height\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`;\r\n\r\n/**\r\n * Returns a query for Adventures filtered by activity\r\n */\r\nfunction filterQuery(activity) {\r\n  return `\r\n    {\r\n      adventureList (filter: {\r\n        adventureActivity: {\r\n          _expressions: [\r\n            {\r\n              value: \"${activity}\"\r\n            }\r\n          ]\r\n        }\r\n      }){\r\n        items {\r\n          _path\r\n        adventureTitle\r\n        adventurePrice\r\n        adventureTripLength\r\n        adventurePrimaryImage {\r\n          ... on ImageRef {\r\n            _path\r\n            mimeType\r\n            width\r\n            height\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  `;\r\n}\r\n\r\n\r\nexport default Adventures;\r\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from 'react';\nimport { withRouter, Link} from \"react-router-dom\";\nimport useGraphQL from '../api/useGraphQL';\nimport backIcon from '../images/icon-close.svg';\nimport Error from './Error';\nimport Loading from './Loading';\nimport './AdventureDetail.scss';\n\n\nfunction AdventureDetail(props) {\n\n    //parse the content fragment from the url\n    const contentFragmentPath = props.location.pathname.substring(props.match.url.length);\n\n    //Use a custom React Hook to execute the GraphQL query\n    const { data, errorMessage } = useGraphQL(adventureDetailQuery(contentFragmentPath));\n\n    //If there is an error with the GraphQL query\n    if(errorMessage) return <Error errorMessage={errorMessage} />;\n\n    //If data is null then return a loading icon...\n    if(!data) return <Loading />;\n\n    //Set adventureData variable based on graphQL response\n    let adventureData = data.adventureByPath.item;\n\n    //Must have title, path, and image\n    if(!adventureData || !adventureData._path || !adventureData.adventureTitle || !adventureData.adventurePrimaryImage ) {\n      return (\n        <div className=\"adventure-detail\">\n          <Link className=\"adventure-detail-close-button\" to={\"/\"}>\n            <img className=\"Backbutton-icon\" src={backIcon} alt=\"Return\" />\n          </Link>\n          <Error errorMessage=\"Missing data, adventure could not be rendered.\" />\n        </div>\n      );\n    }\n    \n    return (\n        <div className=\"adventure-detail\">\n          <Link className=\"adventure-detail-close-button\" to={\"/\"}>\n            <img className=\"Backbutton-icon\" src={backIcon} alt=\"Return\" />\n          </Link>\n          <h1 className=\"adventure-detail-title\">{adventureData.adventureTitle}</h1>\n          <div className=\"adventure-detail-info\">\n            <div className=\"adventure-detail-info-label\">Activity</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureActivity}</div>\n            <div className=\"adventure-detail-info-label\">Type</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureType}</div>\n            <div className=\"adventure-detail-info-label\">Trip Length</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureTripLength}</div>\n            <div className=\"adventure-detail-info-label\">Group Size</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureGroupSize}</div>\n            <div className=\"adventure-detail-info-label\">Difficulty</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventureDifficulty}</div>\n            <div className=\"adventure-detail-info-label\">Price</div>\n            <div className=\"adventure-detail-info-description\">{adventureData.adventurePrice}</div>\n          </div>\n          <div className=\"adventure-detail-content\">\n            <img className=\"adventure-detail-primaryimage\"\n                 src={adventureData.adventurePrimaryImage._path} alt={adventureData.adventureTitle}/>\n            <div dangerouslySetInnerHTML={{__html: adventureData.adventureDescription.html}}></div>\n            <h2>Itinerary</h2>\n            <hr />\n            <div className=\"adventure-detail-itinerary\"\n                 dangerouslySetInnerHTML={{__html: adventureData.adventureItinerary.html}}></div>\n            <Contributer {...adventureData.adventureContributor} />\n          </div>\n\n        </div>\n    );\n}\n\nfunction adventureDetailQuery(_path) {\n  return `{\n    adventureByPath (_path: \"${_path}\") {\n      item {\n        _path\n          adventureTitle\n          adventureActivity\n          adventureType\n          adventurePrice\n          adventureTripLength\n          adventureGroupSize\n          adventureDifficulty\n          adventurePrice\n          adventurePrimaryImage {\n            ... on ImageRef {\n              _path\n              mimeType\n              width\n              height\n            }\n          }\n          adventureDescription {\n            html\n          }\n          adventureItinerary {\n            html\n          }\n      }\n    }\n  }\n  `;\n}\n\nfunction Contributer(props) {\n\n  if(!props) {\n    return null;\n  }\n  let pictureReference = null;\n  if(props.pictureReference) {\n     pictureReference =  <img className=\"contributor-image\" src={props.pictureReference._path} alt={props.fullName} />\n  }\n\n  return (\n    <div className=\"contributor\">\n      <hr className=\"contributor-separator\" />\n      {pictureReference}\n      <h3 className=\"contributor-name\">{props.fullName}</h3>\n      <h4 className=\"contributor-occupation\">{props.occupation}</h4>\n    </div>);\n}\n\n\nexport default withRouter(AdventureDetail);\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport logo from './images/wknd-logo-dk.svg';\nimport Adventures from './components/Adventures';\nimport AdventureDetail from './components/AdventureDetail';\nimport './App.scss';\n\nfunction App() {\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <header>\n          <img src={logo} className=\"logo\" alt=\"WKND Logo\"/>\n          <hr />\n        </header>\n      <Switch>\n        <Route path='/adventure:path'>\n          <AdventureDetail />\n        </Route>  \n        <Route path=\"/\">\n          <Home />\n        </Route>\n      </Switch>\n      </div>\n    </Router>   \n  );\n}\n\n/***\n * Displays a grid of current adventures\n */\nfunction Home() {\n  return (\n    <div className=\"Home\">\n      <h2>Current Adventures</h2>\n      <Adventures />\n  </div>\n  );\n}\n\n\nexport default App;\n","/*\nCopyright 2020 Adobe\nAll Rights Reserved.\n\nNOTICE: Adobe permits you to use, modify, and distribute this file in\naccordance with the terms of the Adobe license agreement accompanying\nit.\n*/\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}